# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- master
- test

- script: echo "${Build.SourceBranch}"
  condition: and(succeeded(), not(startsWith(variables['Build.SourceBranch'], 'refs/heads/test/'))

pool:
  vmImage: 'ubuntu-latest'

stages:
- stage: one
  jobs:
  - job: get
    pool:
      vmImage: 'ubuntu-latest'
    steps:  
    - script: |
        Date="$(date +'%m/%d/%Y')"
        echo "##vso[task.setvariable variable=Date;isOutput=true]$Date"
      
      name: var
    - bash: |
        echo "$(var.Date)"
        echo ${Build.SourceBranch}
    
  - job: out
    dependsOn: get
    variables:
      curdate: $[ dependencies.get.outputs['var.Date'] ]
    pool:
      vmImage: 'ubuntu-latest'
    steps:
    - script: |
        echo "today's date is $(curdate)"
  
       
